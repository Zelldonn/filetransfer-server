Airdroid.Module.TestCallLog=Airdroid.Util.extend(Airdroid.Base,{events:{"click .addCallLog":"addCallLogHandle","click .addCallLogNoContact":"addCallLogNoContactHandle"},defaultOpt:{icon:"../../img/avatar.png",name:"kbz",company:"",job:"",phone:[{type:"Phone",value:"123456789"}],calllog:[{duration:"123 min 456 secds",date:(new Date).getTime(),type:"1"}]},defaultOptNoContact:{icon:"../../img/avatar.png",name:"15959346369",company:"",job:"",phone:[],calllog:[{duration:"328",date:(new Date).getTime(),type:"2"},{duration:"00",date:(new Date).getTime(),type:"1"}]},_construct:function(){Airdroid.Util.addPCInterface({triggerSMSAction:function(a){var b=JSON.parse(a),c=b.phone;alert("，："+c)}})},onCreate:function(a){var b=this;this.parentModule=a,this._refDOM=this.containDom=$(b.util.getTemplate("Test",a.moduleName)),a.setTestApiContent(this._refDOM)},getUniqId:function(){return Math.floor(1e7*Math.random())},addCallLogHandle:function(){var a=this,b={};b.id=this.getUniqId(),a.updateCallLog($.extend(!0,{},this.defaultOpt,b))},addCallLogNoContactHandle:function(){var a=this,b={};b.id="",a.updateCallLog($.extend(!0,{},this.defaultOptNoContact,b))},updateCallLog:function(a){PC_API("CallLog_updateCallLog",a)}}),Airdroid.Module.CallLog=Airdroid.Util.extend(Airdroid.Base,{moduleName:Airdroid.Config.Module.CallLog,events:{"click .item-cmd":"pcActionHandle"},CALLLOG_TYPE:{1:"incoming",2:"outgoing",3:"missed"},PC_ACTION:{send:"send",create:"create",add:"add"},_construct:function(){},onCreate:function(){var a=this;if(this.clear(),this._refDOM=$(a.util.getTemplate("CallLog","index")),this.setContent(this._refDOM),this.setBodyHeight(586),this._detailDom=this.find(".mod-CallLog-body"),this.config.isDebug){var b=new Airdroid.Module["Test"+this.moduleName];b.createAppView(this)}this.registerWebInterface({updateCallLog:"updateCallLog"}),this.showLoadingMask(null,!0)},pcActionHandle:function(a){var b=this,c=$(a.currentTarget),d=c.attr("data-cmd");switch(d){case b.PC_ACTION.send:if(b._detailDom.attr("data-id"))var e=c.closest(".item-phone-con").find(".item-phone").attr("data-phone");else var e=b._detailDom.find(".item-name").text().trim();b.util.triggerPCInterface(JSON.stringify({action:b.pcApi.triggerSMSAction.name,phone:e}));break;case b.PC_ACTION.create:break;case b.PC_ACTION.add:}},updateCallLog:function(a){var b=this;this.hideLoadingMask(),this._detailDom.empty(),this._detailDom.attr("data-id",a.id),_.each(a.calllog,function(a){a.type=Airdroid.Lang[b.CALLLOG_TYPE[a.type]]||b.CALLLOG_TYPE[a.type]});var c=this.util.getTemplate("CallLog","detail",{item:a}).trim();this._detailDom.html(c),this.reinitScrollbar()}});