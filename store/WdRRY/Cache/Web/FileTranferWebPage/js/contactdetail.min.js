Airdroid.Module.TestContactDetail=Airdroid.Util.extend(Airdroid.Base,{events:{"click .addContactDetail":"addContactDetailHandle","click .updateContactDetail":"updateContactDetailHandle"},defaultOpt:{icon:"../../img/avatar.png",name:"kbz",company:"",job:"",phone:[{type:"Phone",value:"123456789"},{type:"Mobile",value:"(646) 861-2253"}],group:["work","family"],mail:[{type:"work",value:"hehe@gmail.com"},{type:"friend",value:"youkown@163.com"}],address:["，","3344"],remark:"，"},_construct:function(){Airdroid.Util.addPCInterface({triggerSMSAction:function(a){var b=JSON.parse(a),c=b.phone;alert("，："+c)}})},onCreate:function(a){var b=this;this.parentModule=a,this._refDOM=this.containDom=$(b.util.getTemplate("Test",a.moduleName)),a.setTestApiContent(this._refDOM)},getUniqId:function(){return Math.floor(1e7*Math.random())},addContactDetailHandle:function(){var a=this,b={};b.id=this.getUniqId(),a.editContactDetail($.extend(!0,{},this.defaultOpt,b))},updateContactDetailHandle:function(){var a=this,b={};b.id=this.getUniqId();var c={name:a.find(".itemName").val().trim(),company:a.find(".itemCompany").val().trim(),job:a.find(".itemJob").val().trim(),phone:function(){var b=[];return _.each(a.find(".itemPhone").val().trim().split(","),function(a){a&&b.push({type:"Mobile",value:a})}),b}(),group:function(){var b=[];return _.each(a.find(".itemGroup").val().trim().split(","),function(a){a&&b.push(a)}),b}(),mail:function(){var b=[];return _.each(a.find(".itemEmail").val().trim().split(","),function(a){a&&b.push({type:"work",value:a})}),b}(),address:function(){var b=[];return _.each(a.find(".itemAddress").val().trim().split(","),function(a){a&&b.push(a)}),b}()};a.editContactDetail($.extend(!0,{},b,c))},editContactDetail:function(a){PC_API("ContactDetail_updateContactDetail",a)}}),Airdroid.Module.ContactDetail=Airdroid.Util.extend(Airdroid.Base,{moduleName:Airdroid.Config.Module.ContactDetail,events:{"click .icon-sms":"sendSMSActionHandle"},_construct:function(){},onCreate:function(){var a=this;if(this.clear(),this._refDOM=$(a.util.getTemplate("ContactDetail","index")),this.setContent(this._refDOM),this.setBodyHeight(586),this._detailDom=this.find(".mod-ContactDetail-body"),this.config.isDebug){var b=new Airdroid.Module["Test"+this.moduleName];b.createAppView(this)}this.contactDetailParams={},this.registerWebInterface({updateContactDetail:"updateContactDetail"}),this.showLoadingMask(null,!0)},sendSMSActionHandle:function(a){var b=this,c=$(a.currentTarget),d=c.closest(".item-phone-con").find(".item-phone").attr("data-phone");b.util.triggerPCInterface(JSON.stringify({action:b.pcApi.triggerSMSAction.name,phone:d}))},updateContactDetail:function(a){this.hideLoadingMask(),this.contactDetailParams=$.extend({},this.contactDetailParams,a),this._detailDom.empty(),this._detailDom.attr("data-id",this.contactDetailParams.id);var b=this.util.getTemplate("ContactDetail","detail",{item:this.contactDetailParams}).trim();this._detailDom.html(b),this.reinitScrollbar();var c=this._detailDom.find(".spliter");c.addClass("i-visibility-hide"),c.filter(":first").removeClass("i-visibility-hide")}});